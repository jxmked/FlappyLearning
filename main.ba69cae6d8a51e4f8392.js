(()=>{var t={75:function(t){(function(){var e,n,r,i,o,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(t.exports=function(){return(e()-o)/1e6},n=process.hrtime,i=(e=function(){var t;return 1e9*(t=n())[0]+t[1]})(),s=1e9*process.uptime(),o=i-s):Date.now?(t.exports=function(){return Date.now()-r},r=Date.now()):(t.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)},87:(t,e,n)=>{for(var r=n(75),i="undefined"==typeof window?n.g:window,o=["moz","webkit"],s="AnimationFrame",a=i["request"+s],c=i["cancel"+s]||i["cancelRequest"+s],h=0;!a&&h<o.length;h++)a=i[o[h]+"Request"+s],c=i[o[h]+"Cancel"+s]||i[o[h]+"CancelRequest"+s];if(!a||!c){var u=0,l=0,p=[];a=function(t){if(0===p.length){var e=r(),n=Math.max(0,16.666666666666668-(e-u));u=n+e,setTimeout((function(){var t=p.slice(0);p.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(u)}catch(t){setTimeout((function(){throw t}),0)}}),Math.round(n))}return p.push({handle:++l,callback:t,cancelled:!1}),l},c=function(t){for(var e=0;e<p.length;e++)p[e].handle===t&&(p[e].cancelled=!0)}}t.exports=function(t){return a.call(i,t)},t.exports.cancel=function(){c.apply(i,arguments)},t.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=a,t.cancelAnimationFrame=c}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";window.dataLayer=window.dataLayer||[];const t=t=>{const e=t.currentTarget||t.target;"A"!==(e.tagName||e.nodeName)&&"on-side"!==e.getAttribute("aria-label-navigate")||gtag("event","url_clicked",{addr:e.href,text:encodeURIComponent(e.innerText)})};!function(e){if(!window.location.protocol.toString().startsWith("https"))return;const n=document.createElement("script");n.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+e),n.async=!0,n.setAttribute("type","text/javascript"),document.getElementsByTagName("head")[0].appendChild(n),window.gtag=window.gtag||function(){window.dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e),document.addEventListener("DOMContentLoaded",(()=>{Array.prototype.forEach.call(document.getElementsByClassName("listen-on-click"),(e=>{(e=>{e.removeEventListener("click",t),e.addEventListener("click",t)})(e)}))}))}("G-JPJZGW7PW6");const e=n.p+"4b8520c2f411bc0084f2616612f1c07b.png";class r{constructor(t){this.__source=t,this.ready=0}eventTracking(t,e){this.ready--,this.ready<1&&t({source:this.source,object:e})}get source(){return this.__source}}class i extends r{}class o extends i{test(){return o.regexp.test(this.source)}load(){return this.ready=3,new Promise(((t,e)=>{const n=new Audio;n.addEventListener("load",(()=>{this.eventTracking(t,n)})),n.addEventListener("canplay",(()=>{this.eventTracking(t,n)})),n.addEventListener("canplaythrough",(()=>{this.eventTracking(t,n)})),n.addEventListener("error",e),n.src=this.source}))}}o.regexp=/\.(mp3|wav|ogg|aac)/i;class s extends i{test(){return s.regexp.test(this.source)}load(){return this.ready=1,new Promise(((t,e)=>{const n=new Image;n.addEventListener("load",(()=>{this.eventTracking(t,n)})),n.addEventListener("error",e),n.src=this.source}))}}s.regexp=/\.(jpe?g|png|svg|bmp|webp|webm|gif)/i;class a{constructor(t){this.callback=()=>{},a.sources.push(...t);const e=t.map((t=>{for(const e of a.loaders){const n=new e(t);if(n.test())return n.load()}throw new Error("No available driver for file: "+t)}));Promise.all(e).then((t=>{t.forEach((t=>{a.assets.set(t.source,t.object)})),this.callback()}))}then(t){this.callback=t}static get(t){return a.assets.get(t)}}a.assets=new Map,a.sources=[],a.loaders=[o,s];const c=a.get,h=a,u=(t,e)=>{const n={width:0,height:0};return"width"in e?(n.width=e.width,n.height=t.height/t.width*e.width):"height"in e&&(n.height=e.height,n.width=t.width*e.height/t.height),n},l=n.p+"9515c2eef10d98cc0700d0ae2fdab2df.png",p=n.p+"ed0226bd23a0ffc4dbfbc2fcff5eadb0.png",d=class{constructor(t){this.position={x:0,y:0},this.pos="",this.width=0,this.height=0,this.velocity={x:0,y:0},this.imgs={top:c(l),bottom:c(p)},this.setOptions(t)}setOptions(t){Object.assign(this,t)}isOut(){return this.position.x+this.width<0}update(){this.position.x-=this.velocity.x}display(t){const{x:e,y:n}=this.position,{width:r,height:i}=this;if("top"===this.pos){const o=u({width:this.imgs.top.width,height:this.imgs.top.height},{width:r});t.drawImage(this.imgs.top,e,n+(i-o.height),o.width,o.height)}else if("bottom"===this.pos){const i=u({width:this.imgs.bottom.width,height:this.imgs.bottom.height},{width:r});t.drawImage(this.imgs.bottom,e,n,i.width,i.height)}}},g=n.p+"4972cd415873dd0ddc6d1425a0a64ce9.png";class f{constructor(t){this.contextAttr={width:0,height:0},this.position={x:0,y:0},this.speed=0,this.imgSrc="",this.img=void 0,this.imgAttr={width:0,height:0},t&&this.setOptions(t)}resize({width:t,height:e}){this.contextAttr={width:t,height:e},this.imgAttr=u({width:this.img.width,height:this.img.height},{height:e})}setOptions(t){const{width:e,height:n,imgSrc:r}=Object.assign(this,t);""===r&&(this.imgSrc=g),this.img=c(this.imgSrc),this.resize({width:e,height:n})}update(){this.position.x+=this.speed}display(t){const{width:e}=this.contextAttr,{x:n,y:r}=this.position,i=Math.ceil(e/this.imgAttr.width)+1,o=n%this.imgAttr.width;for(let e=0;e<i;e++)t.drawImage(this.img,e*this.imgAttr.width-o,r,this.imgAttr.width,this.imgAttr.height)}}class y{constructor(t,e){this.score=t,this.network=Object.assign({neurons:[],weights:[]},e)}}var w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b=function(t,e){return t===e||t!=t&&e!=e},v=b,m=function(t,e){for(var n=t.length;n--;)if(v(t[n][0],e))return n;return-1},_=m,j=Array.prototype.splice,x=m,A=m,O=m,k=function(){this.__data__=[],this.size=0},P=function(t){var e=this.__data__,n=_(e,t);return!(n<0||(n==e.length-1?e.pop():j.call(e,n,1),--this.size,0))},S=function(t){var e=this.__data__,n=x(e,t);return n<0?void 0:e[n][1]},T=function(t){return A(this.__data__,t)>-1},M=function(t,e){var n=this.__data__,r=O(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function E(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}E.prototype.clear=k,E.prototype.delete=P,E.prototype.get=S,E.prototype.has=T,E.prototype.set=M;var G=E,L=G,N="object"==typeof w&&w&&w.Object===Object&&w,C=N,z="object"==typeof self&&self&&self.Object===Object&&self,I=C||z||Function("return this")(),D=I.Symbol,R=D,F=Object.prototype,U=F.hasOwnProperty,q=F.toString,B=R?R.toStringTag:void 0,H=Object.prototype.toString,$=function(t){var e=U.call(t,B),n=t[B];try{t[B]=void 0;var r=!0}catch(t){}var i=q.call(t);return r&&(e?t[B]=n:delete t[B]),i},W=function(t){return H.call(t)},V=D?D.toStringTag:void 0,J=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":V&&V in Object(t)?$(t):W(t)},X=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Z=J,K=X,Q=function(t){if(!K(t))return!1;var e=Z(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Y=I["__core-js_shared__"],tt=function(){var t=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),et=Function.prototype.toString,nt=function(t){if(null!=t){try{return et.call(t)}catch(t){}try{return t+""}catch(t){}}return""},rt=Q,it=function(t){return!!tt&&tt in t},ot=X,st=nt,at=/^\[object .+?Constructor\]$/,ct=Function.prototype,ht=Object.prototype,ut=ct.toString,lt=ht.hasOwnProperty,pt=RegExp("^"+ut.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dt=function(t){return!(!ot(t)||it(t))&&(rt(t)?pt:at).test(st(t))},gt=function(t,e){return null==t?void 0:t[e]},ft=function(t,e){var n=gt(t,e);return dt(n)?n:void 0},yt=ft(I,"Map"),wt=ft(Object,"create"),bt=wt,vt=wt,mt=Object.prototype.hasOwnProperty,_t=wt,jt=Object.prototype.hasOwnProperty,xt=wt,At=function(){this.__data__=bt?bt(null):{},this.size=0},Ot=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},kt=function(t){var e=this.__data__;if(vt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return mt.call(e,t)?e[t]:void 0},Pt=function(t){var e=this.__data__;return _t?void 0!==e[t]:jt.call(e,t)},St=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=xt&&void 0===e?"__lodash_hash_undefined__":e,this};function Tt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Tt.prototype.clear=At,Tt.prototype.delete=Ot,Tt.prototype.get=kt,Tt.prototype.has=Pt,Tt.prototype.set=St;var Mt=Tt,Et=G,Gt=yt,Lt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},Nt=function(t,e){var n=t.__data__;return Lt(e)?n["string"==typeof e?"string":"hash"]:n.map},Ct=Nt,zt=Nt,It=Nt,Dt=Nt,Rt=function(t){var e=Ct(this,t).delete(t);return this.size-=e?1:0,e},Ft=function(t){return zt(this,t).get(t)},Ut=function(t){return It(this,t).has(t)},qt=function(t,e){var n=Dt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Bt.prototype.clear=function(){this.size=0,this.__data__={hash:new Mt,map:new(Gt||Et),string:new Mt}},Bt.prototype.delete=Rt,Bt.prototype.get=Ft,Bt.prototype.has=Ut,Bt.prototype.set=qt;var Ht=G,$t=yt,Wt=Bt,Vt=G,Jt=function(){this.__data__=new L,this.size=0},Xt=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Zt=function(t){return this.__data__.get(t)},Kt=function(t){return this.__data__.has(t)},Qt=function(t,e){var n=this.__data__;if(n instanceof Ht){var r=n.__data__;if(!$t||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wt(r)}return n.set(t,e),this.size=n.size,this};function Yt(t){var e=this.__data__=new Vt(t);this.size=e.size}Yt.prototype.clear=Jt,Yt.prototype.delete=Xt,Yt.prototype.get=Zt,Yt.prototype.has=Kt,Yt.prototype.set=Qt;var te=Yt,ee=ft,ne=function(){try{var t=ee(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),re=ne,ie=function(t,e,n){"__proto__"==e&&re?re(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},oe=ie,se=b,ae=Object.prototype.hasOwnProperty,ce=function(t,e,n){var r=t[e];ae.call(t,e)&&se(r,n)&&(void 0!==n||e in t)||oe(t,e,n)},he=ce,ue=ie,le=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),i?ue(n,a,c):he(n,a,c)}return n},pe=function(t){return null!=t&&"object"==typeof t},de=J,ge=pe,fe=function(t){return ge(t)&&"[object Arguments]"==de(t)},ye=pe,we=Object.prototype,be=we.hasOwnProperty,ve=we.propertyIsEnumerable,me=fe(function(){return arguments}())?fe:function(t){return ye(t)&&be.call(t,"callee")&&!ve.call(t,"callee")},_e=me,je=Array.isArray,xe={},Ae={get exports(){return xe},set exports(t){xe=t}},Oe=function(){return!1};!function(t,e){var n=I,r=Oe,i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?n.Buffer:void 0,a=(s?s.isBuffer:void 0)||r;t.exports=a}(Ae,xe);var ke=/^(?:0|[1-9]\d*)$/,Pe=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Se=J,Te=Pe,Me=pe,Ee={};Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee["[object Arguments]"]=Ee["[object Array]"]=Ee["[object ArrayBuffer]"]=Ee["[object Boolean]"]=Ee["[object DataView]"]=Ee["[object Date]"]=Ee["[object Error]"]=Ee["[object Function]"]=Ee["[object Map]"]=Ee["[object Number]"]=Ee["[object Object]"]=Ee["[object RegExp]"]=Ee["[object Set]"]=Ee["[object String]"]=Ee["[object WeakMap]"]=!1;var Ge=function(t){return function(e){return t(e)}},Le={},Ne={get exports(){return Le},set exports(t){Le=t}};!function(t,e){var n=N,r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,o=i&&i.exports===r&&n.process,s=function(){try{return i&&i.require&&i.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s}(Ne,Le);var Ce=function(t){return Me(t)&&Te(t.length)&&!!Ee[Se(t)]},ze=Ge,Ie=Le&&Le.isTypedArray,De=Ie?ze(Ie):Ce,Re=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},Fe=_e,Ue=je,qe=xe,Be=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ke.test(t))&&t>-1&&t%1==0&&t<e},He=De,$e=Object.prototype.hasOwnProperty,We=function(t,e){var n=Ue(t),r=!n&&Fe(t),i=!n&&!r&&qe(t),o=!n&&!r&&!i&&He(t),s=n||r||i||o,a=s?Re(t.length,String):[],c=a.length;for(var h in t)!e&&!$e.call(t,h)||s&&("length"==h||i&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Be(h,c))||a.push(h);return a},Ve=Object.prototype,Je=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ve)},Xe=function(t,e){return function(n){return t(e(n))}},Ze=Xe(Object.keys,Object),Ke=Je,Qe=Ze,Ye=Object.prototype.hasOwnProperty,tn=Q,en=Pe,nn=function(t){return null!=t&&en(t.length)&&!tn(t)},rn=We,on=function(t){if(!Ke(t))return Qe(t);var e=[];for(var n in Object(t))Ye.call(t,n)&&"constructor"!=n&&e.push(n);return e},sn=nn,an=function(t){return sn(t)?rn(t):on(t)},cn=le,hn=an,un=X,ln=Je,pn=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},dn=Object.prototype.hasOwnProperty,gn=We,fn=function(t){if(!un(t))return pn(t);var e=ln(t),n=[];for(var r in t)("constructor"!=r||!e&&dn.call(t,r))&&n.push(r);return n},yn=nn,wn=function(t){return yn(t)?gn(t,!0):fn(t)},bn=le,vn=wn,mn={},_n={get exports(){return mn},set exports(t){mn=t}};!function(t,e){var n=I,r=e&&!e.nodeType&&e,i=r&&t&&!t.nodeType&&t,o=i&&i.exports===r?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}(_n,mn);var jn=function(){return[]},xn=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o},An=jn,On=Object.prototype.propertyIsEnumerable,kn=Object.getOwnPropertySymbols,Pn=kn?function(t){return null==t?[]:(t=Object(t),xn(kn(t),(function(e){return On.call(t,e)})))}:An,Sn=Pn,Tn=le,Mn=Sn,En=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},Gn=Xe(Object.getPrototypeOf,Object),Ln=En,Nn=Gn,Cn=Sn,zn=jn,In=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ln(e,Cn(t)),t=Nn(t);return e}:zn,Dn=le,Rn=In,Fn=En,Un=je,qn=function(t,e,n){var r=e(t);return Un(t)?r:Fn(r,n(t))},Bn=qn,Hn=Sn,$n=an,Wn=qn,Vn=In,Jn=wn,Xn=ft(I,"DataView"),Zn=yt,Kn=ft(I,"Promise"),Qn=ft(I,"Set"),Yn=ft(I,"WeakMap"),tr=J,er=nt,nr="[object Map]",rr="[object Promise]",ir="[object Set]",or="[object WeakMap]",sr="[object DataView]",ar=er(Xn),cr=er(Zn),hr=er(Kn),ur=er(Qn),lr=er(Yn),pr=tr;(Xn&&pr(new Xn(new ArrayBuffer(1)))!=sr||Zn&&pr(new Zn)!=nr||Kn&&pr(Kn.resolve())!=rr||Qn&&pr(new Qn)!=ir||Yn&&pr(new Yn)!=or)&&(pr=function(t){var e=tr(t),n="[object Object]"==e?t.constructor:void 0,r=n?er(n):"";if(r)switch(r){case ar:return sr;case cr:return nr;case hr:return rr;case ur:return ir;case lr:return or}return e});var dr=pr,gr=Object.prototype.hasOwnProperty,fr=I.Uint8Array,yr=function(t){var e=new t.constructor(t.byteLength);return new fr(e).set(new fr(t)),e},wr=yr,br=/\w*$/,vr=D?D.prototype:void 0,mr=vr?vr.valueOf:void 0,_r=yr,jr=yr,xr=function(t,e){var n=e?wr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Ar=function(t){var e=new t.constructor(t.source,br.exec(t));return e.lastIndex=t.lastIndex,e},Or=function(t){return mr?Object(mr.call(t)):{}},kr=function(t,e){var n=e?_r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Pr=X,Sr=Object.create,Tr=function(){function t(){}return function(e){if(!Pr(e))return{};if(Sr)return Sr(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Mr=Tr,Er=Gn,Gr=Je,Lr=dr,Nr=pe,Cr=function(t){return Nr(t)&&"[object Map]"==Lr(t)},zr=Ge,Ir=Le&&Le.isMap,Dr=Ir?zr(Ir):Cr,Rr=dr,Fr=pe,Ur=function(t){return Fr(t)&&"[object Set]"==Rr(t)},qr=Ge,Br=Le&&Le.isSet,Hr=Br?qr(Br):Ur,$r=te,Wr=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Vr=ce,Jr=function(t,e){return t&&cn(e,hn(e),t)},Xr=function(t,e){return t&&bn(e,vn(e),t)},Zr=mn,Kr=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Qr=function(t,e){return Tn(t,Mn(t),e)},Yr=function(t,e){return Dn(t,Rn(t),e)},ti=function(t){return Bn(t,$n,Hn)},ei=function(t){return Wn(t,Jn,Vn)},ni=dr,ri=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&gr.call(t,"index")&&(n.index=t.index,n.input=t.input),n},ii=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return jr(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return xr(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return kr(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return Ar(t);case"[object Symbol]":return Or(t)}},oi=function(t){return"function"!=typeof t.constructor||Gr(t)?{}:Mr(Er(t))},si=je,ai=xe,ci=Dr,hi=X,ui=Hr,li=an,pi=wn,di="[object Arguments]",gi="[object Function]",fi="[object Object]",yi={};yi[di]=yi["[object Array]"]=yi["[object ArrayBuffer]"]=yi["[object DataView]"]=yi["[object Boolean]"]=yi["[object Date]"]=yi["[object Float32Array]"]=yi["[object Float64Array]"]=yi["[object Int8Array]"]=yi["[object Int16Array]"]=yi["[object Int32Array]"]=yi["[object Map]"]=yi["[object Number]"]=yi[fi]=yi["[object RegExp]"]=yi["[object Set]"]=yi["[object String]"]=yi["[object Symbol]"]=yi["[object Uint8Array]"]=yi["[object Uint8ClampedArray]"]=yi["[object Uint16Array]"]=yi["[object Uint32Array]"]=!0,yi["[object Error]"]=yi[gi]=yi["[object WeakMap]"]=!1;var wi=function t(e,n,r,i,o,s){var a,c=1&n,h=2&n,u=4&n;if(r&&(a=o?r(e,i,o,s):r(e)),void 0!==a)return a;if(!hi(e))return e;var l=si(e);if(l){if(a=ri(e),!c)return Kr(e,a)}else{var p=ni(e),d=p==gi||"[object GeneratorFunction]"==p;if(ai(e))return Zr(e,c);if(p==fi||p==di||d&&!o){if(a=h||d?{}:oi(e),!c)return h?Yr(e,Xr(a,e)):Qr(e,Jr(a,e))}else{if(!yi[p])return o?e:{};a=ii(e,p,c)}}s||(s=new $r);var g=s.get(e);if(g)return g;s.set(e,a),ui(e)?e.forEach((function(i){a.add(t(i,n,r,i,e,s))})):ci(e)&&e.forEach((function(i,o){a.set(o,t(i,n,r,o,e,s))}));var f=l?void 0:(u?h?ei:ti:h?pi:li)(e);return Wr(f||e,(function(i,o){f&&(i=e[o=i]),Vr(a,o,t(i,n,r,o,e,s))})),a},bi=function(t){return wi(t,5)},vi=_e,mi=je,_i=D?D.isConcatSpreadable:void 0,ji=En,xi=function(t){return mi(t)||vi(t)||!!(_i&&t&&t[_i])},Ai=function t(e,n,r,i,o){var s=-1,a=e.length;for(r||(r=xi),o||(o=[]);++s<a;){var c=e[s];n>0&&r(c)?n>1?t(c,n-1,r,i,o):ji(o,c):i||(o[o.length]=c)}return o},Oi=function(t){return null!=t&&t.length?Ai(t,1):[]};class ki{constructor(t){this.genomes=[],this.ne=t}addGenome(t){for(let e=0;e<this.genomes.length;e++)if(this.ne.options.scoreSort<0){if(t.score>this.genomes[e].score)return this.genomes.splice(e,0,t),e}else if(t.score<this.genomes[e].score)return this.genomes.splice(e,0,t),e;return this.genomes.push(t),0}generateNextGeneration(){if(0===this.genomes.length)throw new Error("No genome to start with");const t=[],{elitism:e,population:n,randomBehaviour:r}=this.ne.options,i=Math.round(e*n),o=Math.round(r*n);for(let e=0;e<i;e++)t.length<n&&t.push(bi(this.genomes[e].network));if(o>0&&t.length<n)for(let e=0;e<o;e++){const e=this.genomes[0].network.weights.length,n={neurons:Oi(this.ne.options.network),weights:[]};for(let t=0;t<e;t++)n.weights[t]=this.randomClamped();t.push(n)}if(t.length>=n)return t.slice(0,n);let s=1;for(;;){for(let e=0;e<s;e++){const r=this.breeder(this.genomes[e],this.genomes[s]);for(const e of r)if(t.push(e.network),t.length>=n)return t}s++,s>=this.genomes.length&&(s=0)}}breeder(t,e){let{nbChild:n}=this.ne.options;return n=n>0?n:1,this.randomClamped()<0?this.breeder_1(t,e,n):this.breeder_2(t,e,n)}breeder_1(t,e,n){const r=[],{mutationRate:i,crossoverFactor:o}=this.ne.options;for(let s=0;s<n;s++){const n=new y(t.score,t.network);for(let t=0;t<e.network.weights.length;t++)Math.random()<=o&&(n.network.weights[t]=e.network.weights[t]);for(let t=0;t<n.network.weights.length;t++)Math.random()<=i&&(n.network.weights[t]+=Math.random()*i*2-i);r.push(n)}return r}breeder_2(t,e,n){const r=[],{mutationRate:i}=this.ne.options,o=e.network.weights.length;for(let s=0;s<n;s++){const n=new y(t.score,t.network);let s=Math.floor(Math.random()*o),a=Math.floor(Math.random()*o);s>a&&([s,a]=[a,s]);for(let t=s;t<a;t++)n.network.weights[t]=e.network.weights[t];for(let t=0;t<n.network.weights.length;t++)Math.random()<=i&&(n.network.weights[t]+=Math.random()*i*2-i);r.push(n)}return r}randomClamped(){return 2*Math.random()-1}}class Pi{constructor(){this.value=0,this.weights=[]}populate(t){for(let e=0;e<t;e++)this.weights.push(this.randomClamped())}resetWeights(){this.weights=[]}randomClamped(){return 2*Math.random()-1}}class Si{constructor(){this.neurons=[]}populate(t,e){for(let n=0;n<t;n++){const t=new Pi;t.populate(e),this.neurons.push(t)}}}class Ti{constructor(){this.__layers__=[]}get layers(){return this.__layers__}generateNetworkLayers(t,e,n){let r=0,i=0;const o=new Si,s=new Si;for(o.populate(t,i),s.populate(n,e[e.length-1]),this.__layers__.push(o),i=t,r++;r<=e.length;r++){const t=new Si;t.populate(e[r-1],i),this.__layers__.push(t),i=e[r-1]}this.__layers__.push(s)}getCopyOfTheNetwork(){const t={neurons:[],weights:[]},e=this.__layers__.length;for(let n=0;n<e;n++){const e=this.__layers__[n].neurons,r=e.length;t.neurons.push(r);for(let n=0;n<r;n++)t.weights.splice(t.weights.length,0,...e[n].weights)}return t}loadNetworkWithData(t){const e=t.neurons.length;let n=0,r=0;this.resetNetwork();for(let i=0;i<e;i++){const e=new Si;e.populate(t.neurons[i],r);const o=e.neurons;for(const e of o){const r=e.weights.length;for(let i=0;i<r;i++)e.weights[i]=t.weights[n],n++}this.__layers__.push(e),r=t.neurons[i]}}compute(t){const e=t.length,n=this.layers.length,r=[];for(let n=0;n<e;n++){const e=this.layers[0];this.layers[0]&&e.neurons[n]&&(e.neurons[n].value=t[n])}for(let t=1;t<n;t++){const e=this.layers[t-1],n=this.layers[t],r=e.neurons.length,i=n.neurons.length;for(let t=0;t<i;t++){let i=0;for(let o=0;o<r;o++)i+=e.neurons[o].value*n.neurons[t].weights[o];n.neurons[t].value=this.activation(i)}}const i=this.layers[n-1],o=i.neurons.length;for(let t=0;t<o;t++)r.push(i.neurons[t].value);return r}activation(t){const e=-t/1;return 1/(1+Math.exp(e))}resetNetwork(){this.__layers__=[]}}class Mi{constructor(t){this.generations=[],this.ne=t}firstGeneration(t,e,n){const r=[];for(let i=0;i<this.ne.options.population;i++){const i=new Ti;i.generateNetworkLayers(t,e,n),r.push(i.getCopyOfTheNetwork())}return this.generations.push(new ki(this.ne)),r}nextGeneration(){if(0===this.generations.length)throw new TypeError("Must call method Generations.firstGeneration() first.");const t=this.generations[this.generations.length-1].generateNextGeneration();return this.generations.push(new ki(this.ne)),t}addGenome(t){if(0===this.generations.length)throw new Error("Cannot insert genome. Generations.generations has no item");return this.generations[this.generations.length-1].addGenome(t)}}class Ei{constructor(t){this.configuration=Object.assign({network:[1,[2],1],population:50,elitism:.2,randomBehaviour:.2,mutationRate:.1,historic:0,lowHistoric:!1,scoreSort:-1,nbChild:1,crossoverFactor:.5},t),this.generations=new Mi(this),this.exportableGenerations=[]}get options(){return this.configuration}setConfiguration(t){this.configuration=Object.assign(this.configuration,t)}resetGeneration(){this.generations=new Mi(this)}nextGeneration(){let t=[];const e=this.generations.generations;this.exportableGenerations=bi(e),t=0===e.length?this.generations.firstGeneration(this.options.network[0],this.options.network[1],this.options.network[2]):this.generations.nextGeneration();const n=[];for(const e of t){const t=new Ti;t.loadNetworkWithData(e),n.push(t)}if(this.options.lowHistoric&&e.length>1){const t=e[e.length-2].genomes;t.splice(0,t.length-1)}return-1!==this.options.historic&&e.length>this.options.historic+1&&e.splice(0,e.length-(this.options.historic+1)),n}exportData(){const t={config:this.options,data:[]};return this.exportableGenerations.length<1||(t.data=this.exportableGenerations.map((t=>t.genomes.map((t=>({network:t.network,score:t.score})))))),t}importData(t){t.config&&this.setConfiguration(t.config),t.data.forEach((t=>{const e=new ki(this);t.forEach((({score:t,network:n})=>{e.addGenome(new y(t,n))})),this.generations.generations.push(e)}))}networkScore(t,e){const n=new y(e,t.getCopyOfTheNetwork());return this.generations.addGenome(n)}}const Gi=[],Li="zero-timeout-message";window.addEventListener("message",(t=>{if(t.source==window&&t.data===Li&&(t.stopPropagation(),Gi.length>0)){const t=Gi.shift();t&&t()}}),!0);var Ni,Ci=n(87),zi=n.n(Ci);Ni=window.location.href.toString(),window.dataLayer.push({event:"pageview",url:Ni});const Ii={game:{speedRange:document.querySelector("#gs-speed"),toggle:document.querySelector("#gs-toggle"),reset:document.querySelector("#gs-reset"),endGen:document.querySelector("#gs-end-gen")},ai:{toggle:document.querySelector("#as-toggle"),reset:document.querySelector("#as-reset"),import:document.querySelector("#as-imp"),export:document.querySelector("#as-exp")}},Di={alive:document.querySelector("#alive"),score:document.querySelector("#score"),highest:document.querySelector("#highest"),generation:document.querySelector("#generation")},Ri=document.querySelector("#main-canvas"),Fi=document.querySelector("#current-speed"),Ui=new class{constructor(t){this.background=new f,this.birds=[],this.pipes=[],this.canvas=t,this.context=this.canvas.getContext("2d"),this.isPause=!1,this.pipeInterval=170,this.pipeUsedInterval=0,this.birdsAlive=0,this.globalPause=!1,this.Neuvol=new Ei({network:[2,[3],1],population:50}),this.NeuvolGen=[],this.score=0,this.generationCount=0,this.pauseAfterGen=!1,this.endGen=!1,window.Neuroevolution=this.Neuvol,window.NeuvolGen=this.NeuvolGen,this.threshold=.5}initialize(){this.background.setOptions({width:this.canvas.width,height:this.canvas.height,speed:.5})}clearContext(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}update(){if(this.isPause||this.globalPause)return;this.background.update(),this.birds.length<1&&this.restart(),this.score++,this.pipeUsedInterval++,this.pipeInterval<=this.pipeUsedInterval&&(this.addPipe(),this.pipeUsedInterval=0);let t=0;for(const e of this.pipes)try{if(e.position.x+e.width>this.birds[0].position.x){t=e.height/this.canvas.height;break}}catch(t){}for(let e=0;e<this.NeuvolGen.length;e++)this.birds[e].alive&&(this.NeuvolGen[e].compute([this.birds[e].position.y/this.canvas.height,t])[0]>this.threshold&&this.birds[e].flap(),this.birds[e].update(),(this.endGen||this.birds[e].isDead(this.canvas.height,this.pipes))&&(this.birds[e].alive=!1,this.birdsAlive--,this.Neuvol.networkScore(this.NeuvolGen[e],this.score),this.birdsAlive<=0&&this.restart()));for(let t=0;t<this.pipes.length;t++)this.pipes[t].update(),this.pipes[t].isOut()&&(this.pipes.splice(t,1),t--)}display(){if(this.clearContext(),this.background.display(this.context),!this.globalPause){for(const t of this.pipes)try{t.display(this.context)}catch(t){}for(const t of this.birds)t.display(this.context)}}addPipe(){const{height:t,width:e}=this.canvas,n=t-140-200,r=Math.round(Math.random()*n)+70,i={position:{x:e,y:0},width:110,height:r,pos:"top",velocity:{x:3,y:0}},o={position:{x:e,y:r+200},width:110,height:t,pos:"bottom",velocity:{x:3,y:0}};this.pipes.push(new d(i)),this.pipes.push(new d(o))}addBird(t){t=Object.assign({alive:!0,position:{x:200,y:500},width:70,height:60,gravity:0,velocity:{y:.3,x:.3},jump:-6},t),this.birdsAlive++,this.birds.push(new class{constructor(t){this.position={x:0,y:0},this.width=0,this.height=0,this.alive=!1,this.gravity=0,this.velocity={x:0,y:0},this.jump=0,this.img=c(e),this.setOptions(t)}setOptions(t){Object.assign(this,t)}flap(){this.gravity=this.jump}isDead(t,e){const n=this.position.y,r=this.position.x;if(n>=t)return!0;if(n+this.height<=0)return!0;for(const t of e)try{const{x:e,y:i}=t.position,{width:o,height:s}=t;if(e-o>r)continue;if(!(r>=e+o||n>=i+s||r+this.width<=e||n+this.height<=i))return!0}catch(t){}return!1}update(){this.alive&&(this.gravity+=this.velocity.y,this.position.y+=this.gravity)}display(t){if(!this.alive)return;const{x:e,y:n}=this.position,{width:r,gravity:i}=this,o=u({width:this.img.width,height:this.img.height},{width:r});t.save(),t.translate(e,n),t.translate(o.width/2,o.height/2),t.rotate(Math.PI/2*i/20),t.drawImage(this.img,-o.width/2,-o.height/2,o.width,o.height),t.restore()}}(t))}onResize({width:t,height:e}){this.canvas.width=t,this.canvas.height=e,this.background.resize({width:t,height:e})}pause(){this.isPause=!0}resume(){this.isPause=!1}get state(){return!0===this.isPause?"pause":"play"}endGeneration(){this.endGen=!0}restart(){this.globalPause=!0,this.pipes.splice(0,this.pipes.length),this.birds.splice(0,this.birds.length),this.score=0,this.birdsAlive=0;for(let t=0;t<this.Neuvol.options.population;t++)this.addBird();try{this.NeuvolGen=this.Neuvol.nextGeneration()}catch(t){this.Neuvol.resetGeneration(),this.NeuvolGen=this.Neuvol.nextGeneration(),this.generationCount=-1}this.endGen=!1,this.generationCount++,this.globalPause=!1}exportData(){return this.Neuvol.exportData()}importData(t){t&&(this.generationCount=0),this.Neuvol.importData(t)}}(Ri);let qi,Bi=60,Hi=!1,$i=0,Wi=!1;const Vi=new class{constructor(t){this.fps=0,this.timeArray=[],this.context=t,this.containerOpacity=.4,this.textProps={position:{x:0,y:0},preText:"",postText:""},this.containerProps={startingPoint:{x:0,y:0},endPoint:{x:0,y:0}}}text(t,e,n){this.textProps.position=t,this.textProps.preText=e,this.textProps.postText=n}container(t,e){this.containerProps={startingPoint:t,endPoint:e}}mark(){const t=performance.now();for(;this.timeArray.length>0&&this.timeArray[0]<=t-1e3;)this.timeArray.shift();this.timeArray.push(t),this.fps=this.timeArray.length,this.drawContainer(),this.drawText(String(this.fps))}drawContainer(){const t=this.context,{startingPoint:e,endPoint:n}=this.containerProps;t.beginPath(),t.globalAlpha=this.containerOpacity,t.fillStyle="#1e1e20",t.fillRect(e.x,e.y,n.x,n.y),t.fill(),t.closePath()}drawText(t){const e=this.context,{preText:n,postText:r,position:i}=this.textProps,o=`${n}${t}${r}`;e.beginPath(),e.globalAlpha=1,e.font="30px monospace",e.fillStyle="#58d130",e.fillText(o,i.x,i.y),e.closePath()}}(Ui.context);Vi.container({x:10,y:10},{x:180,y:60}),Vi.text({x:50,y:50},"","fps");const Ji=()=>{var t;Ui.update(),0===Bi?(t=Ji,Gi.push(t),window.postMessage(Li,"*")):60===Bi?zi()(Ji):qi=setTimeout(Ji,1e3/Bi)},Xi=()=>{Ui.display(),Di.alive.innerHTML=String(Ui.birdsAlive),Ui.score>$i&&($i=Ui.score),Vi.mark(),Di.highest.innerHTML=String($i),Di.score.innerHTML=String(Ui.score),Di.generation.innerHTML=String(Ui.generationCount),zi()(Xi)};window.addEventListener("DOMContentLoaded",(()=>{new h([g,l,e,p]).then((()=>{Ui.initialize(),Ui.onResize({width:1e3,height:1e3}),zi()(Xi),Wi=!0,Ii.game.toggle.innerHTML="Play",Fi.innerHTML=String(Bi)}))})),Ii.game.toggle.addEventListener("click",(()=>{if(Wi&&!Hi)return Ii.game.reset.click(),void(Ii.game.toggle.innerHTML="Pause");"play"===Ui.state?(Ui.pause(),Ii.game.toggle.innerHTML="Resume"):"pause"===Ui.state&&(Ui.resume(),Ii.game.toggle.innerHTML="Pause")})),Ii.game.reset.addEventListener("click",(()=>{Wi&&(Hi||Ji(),Ii.game.toggle.innerHTML="play"===Ui.state?"Pause":"Resume",Hi=!0,Ui.restart())})),Ii.game.speedRange.addEventListener("input",(()=>{if(Wi){switch(parseInt(Ii.game.speedRange.value)){case 0:Bi=60;break;case 1:Bi=256;break;case 2:Bi=512;break;case 3:Bi=700;break;case 4:Bi=1e3;break;case 5:return Bi=0,window.clearTimeout(qi),Hi&&Ji(),void(Fi.innerHTML="MAX");case-1:Bi=30;break;default:Bi=10}Fi.innerHTML=String(Bi)}})),Ii.ai.export.addEventListener("click",(()=>{const t=Ui.exportData(),e=new Blob([JSON.stringify(t)],{type:"text/plain"}),n=document.createElement("a");n.setAttribute("href",URL.createObjectURL(e)),n.setAttribute("download","Neuroevolution-export.json"),n.style.display="none",document.body.appendChild(n),n.click(),n.remove()})),Ii.ai.import.addEventListener("click",(()=>{const t=document.createElement("input"),e=new FileReader;t.setAttribute("type","file"),t.style.display="none",t.addEventListener("change",(()=>{null!=t.files[0]&&e.readAsText(t.files[0])})),e.onload=()=>{try{const t=JSON.parse(e.result);Ui.importData(t),alert("Imported")}catch(t){console.warn(t),alert("Failed to import")}},document.body.appendChild(t),t.click(),t.remove()})),Ii.game.endGen.addEventListener("click",(()=>{Ui.endGeneration(),Ii.game.toggle.click()}))})()})();